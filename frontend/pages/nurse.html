<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H·ªá Th·ªëng Y T√° - Ti·∫øp ƒê√≥n & D∆∞·ª£c</title>
    <link rel="stylesheet" href="../static/css/style.css">
    <style>
        .content-with-sidebar { margin-left: 260px; padding: 30px; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .sidebar a.active { background-color: #34495e; font-weight: bold; border-left: 4px solid #16a085; }
        .status-waiting { color: #e67e22; font-weight: bold; }
        .pres-card { background: white; border: 1px solid #ddd; padding: 15px; border-radius: 8px; margin-bottom: 15px; }
    </style>
</head>
<body>
    <div class="navbar" style="background: #16a085;">
        <h2>üè• H·ªá Th·ªëng Y T√°</h2>
        <div class="user-info">
            <span id="userDisplay" style="margin-right: 15px; font-weight: bold; color: white;">Y T√°</span>
            <button class="btn-logout" onclick="api.logout()">ƒêƒÉng Xu·∫•t</button>
        </div>
    </div>

    <div class="sidebar">
        <a href="#" onclick="switchTab('patients', this)" class="active">üë• Qu·∫£n L√Ω B·ªánh Nh√¢n</a>
        <a href="#" onclick="switchTab('waiting', this)">‚è≥ H√†ng Ch·ªù Kh√°m</a>
        <a href="#" onclick="switchTab('pharmacy', this)">üíä C·∫•p Ph√°t Thu·ªëc</a>
        <a href="#" onclick="switchTab('staff', this)">üë®‚Äç‚öïÔ∏è Danh S√°ch Nh√¢n S·ª±</a> </div>
    </div>

    <div class="content-with-sidebar">
        <div id="tab-patients" class="tab-content active">
            <div class="page-header" style="display:flex; justify-content:space-between; margin-bottom: 20px;">
                <h3>Danh S√°ch B·ªánh Nh√¢n</h3>
                <button class="btn-primary" onclick="openPatientModal()">+ Th√™m B·ªánh Nh√¢n</button>
            </div>
            <div class="search-box" style="margin-bottom: 20px;">
                <input type="text" id="searchInput" placeholder="üîç T√¨m ki·∫øm b·ªánh nh√¢n...">
            </div>
            <div class="table-container">
                <table id="patientTable">
                    <thead>
                        <tr><th>ID</th><th>H·ªç T√™n</th><th>Ng√†y Sinh</th><th>SƒêT</th><th>Thao T√°c</th></tr>
                    </thead>
                    <tbody id="tableBody"></tbody>
                </table>
            </div>
        </div>

        <div id="tab-waiting" class="tab-content">
            <div style="display:flex; justify-content:space-between; margin-bottom: 20px;">
                <h3>‚è≥ Danh S√°ch ƒê√£ ƒêƒÉng K√Ω Kh√°m</h3>
                <button class="btn-primary" onclick="loadWaitingVisits()">üîÑ C·∫≠p nh·∫≠t</button>
            </div>
            <div class="table-container">
                <table>
                    <thead>
                        <tr><th>Th·ªùi Gian</th><th>B·ªánh Nh√¢n</th><th>Khoa ƒêƒÉng K√Ω</th><th>Ghi Ch√∫</th><th>Tr·∫°ng Th√°i</th></tr>
                    </thead>
                    <tbody id="waitingBody"></tbody>
                </table>
            </div>
        </div>

        <div id="tab-pharmacy" class="tab-content">
            <h3>üíä ƒê∆°n Thu·ªëc Ch·ªù C·∫•p Ph√°t</h3>
            <div id="prescriptionList" style="margin-top: 20px;">
                </div>
        </div>
        <div id="tab-staff" class="tab-content">
            <div class="page-header" style="margin-bottom: 20px;">
                <h3>üë®‚Äç‚öïÔ∏è Danh S√°ch Nh√¢n Vi√™n Ph√≤ng Kh√°m</h3>
            </div>
            <div class="table-container">
                <table>
                    <thead>
                        <tr style="background: #f8f9fa;">
                            <th>ID</th>
                            <th>H·ªç T√™n</th>
                            <th>Vai Tr√≤</th>
                            <th>Khoa</th>
                            <th>S·ªë ƒêi·ªán Tho·∫°i</th>
                        </tr>
                    </thead>
                    <tbody id="staffTableBody">
                        <tr><td colspan="5" style="text-align: center;">ƒêang t·∫£i d·ªØ li·ªáu...</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="modal" id="patientModal" style="display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5);">
        <div class="modal-content" style="background: white; margin: 10% auto; padding: 20px; width: 50%; border-radius: 8px;">
            <h3 id="patientModalTitle">Th√¥ng Tin B·ªánh Nh√¢n</h3>
            <form id="patientForm">
                <input type="hidden" id="patientId">
                <div class="form-group">
                    <label>H·ªç T√™n *</label>
                    <input type="text" id="fullName" required style="width: 100%; padding: 8px; margin: 5px 0;">
                </div>
                <div style="display: flex; gap: 10px;">
                    <div style="flex: 1;">
                        <label>Ng√†y Sinh *</label>
                        <input type="date" id="dateOfBirth" required style="width: 100%; padding: 8px;">
                    </div>
                    <div style="flex: 1;">
                        <label>Gi·ªõi T√≠nh *</label>
                        <select id="gender" required style="width: 100%; padding: 8px;">
                            <option value="M">Nam</option>
                            <option value="F">N·ªØ</option>
                        </select>
                    </div>
                </div>
                <div class="form-group" style="margin-top: 10px;">
                    <label>S·ªë ƒêi·ªán Tho·∫°i</label>
                    <input type="text" id="phoneNumber" style="width: 100%; padding: 8px;">
                </div>
                <div class="form-group" style="margin-top: 10px;">
                    <label>BHYT</label>
                    <input type="text" id="insuranceNumber" style="width: 100%; padding: 8px;">
                </div>
                <div class="form-group" style="margin-top: 10px;">
                    <label>ƒê·ªãa Ch·ªâ</label>
                    <input type="text" id="address" style="width: 100%; padding: 8px;">
                </div>
                <div style="margin-top: 20px; text-align: right;">
                    <button type="button" class="btn-danger" onclick="closePatientModal()">H·ªßy</button>
                    <button type="submit" class="btn-success">L∆∞u</button>
                </div>
            </form>
        </div>
    </div>
    
    <div class="modal" id="visitModal" style="display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5);">
        <div class="modal-content" style="background: white; margin: 10% auto; padding: 20px; width: 40%; border-radius: 8px;">
            <h3>ƒêƒÉng K√Ω Kh√°m</h3>
            <p id="visitPatientInfo" style="font-weight: bold; color: #16a085;"></p>
            <form id="visitForm">
                <input type="hidden" id="visitPatientId">
                <div class="form-group">
                    <label>Khoa Kh√°m *</label>
                    <select id="departmentSelect" required style="width: 100%; padding: 8px;"></select>
                </div>
                <div class="form-group" style="margin-top: 10px;">
                    <label>Ghi Ch√∫ Tri·ªáu Ch·ª©ng</label>
                    <textarea id="visitNotes" style="width: 100%; padding: 8px; height: 80px;"></textarea>
                </div>
                <div style="margin-top: 20px; text-align: right;">
                    <button type="button" class="btn-danger" onclick="closeVisitModal()">H·ªßy</button>
                    <button type="submit" class="btn-success">ƒêƒÉng K√Ω</button>
                </div>
            </form>
        </div>
    </div>
    <script src="../static/js/api.js"></script>
    <script src="../static/js/nurse.js"></script>
</body>
</html>